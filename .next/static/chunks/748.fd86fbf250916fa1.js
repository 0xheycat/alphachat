(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{15748:function(e,s,t){"use strict";t.r(s),t.d(s,{Chat:function(){return R},default:function(){return H}});var a=t(85893),n=t(67294),r=t(5152),i=t.n(r),l=t(94184),m=t.n(l),c=t(42138),o=t(33246),_=t(26246),d=t(92241),h=t.n(d),x=t(27484),g=t.n(x),u=t(68924),f=t.n(u),p=t(15146);let C=e=>e.replace(/(^|\s)(https?:\/\/\S+)/ig,'$1<a href="$2" target="_blank">$2</a>'),j={whiteList:{a:["href","title","target"]}};var M=t(21697),w=t.n(M);let N=(0,n.memo)((0,n.forwardRef)((e,s)=>{let{text:t,createdAt:r,classNameWrap:i,isSent:l=!1,showTime:o=!0}=e,_=(0,n.useMemo)(()=>g()(r).format("HH:mm â€¢ MMM DD"),[r]),d=(0,n.useMemo)(()=>({__html:f()(C(t),j)}),[t]);return(0,a.jsxs)(c.x,{justifyContent:"space-between",className:m()(w().wrap,{[w().sent]:l},i),ref:s,alignItems:"flex-start",children:[(0,a.jsx)(c.x,{className:w().messageContainer,children:(0,a.jsx)("div",{className:w().message,dangerouslySetInnerHTML:d})}),(0,a.jsxs)(c.x,{className:m()(w().time,{[w().hideTime]:!o}),alignItems:"center",children:[(0,a.jsx)(p.J,{name:"clock",width:12,height:12,className:m()(w().icon,{[w().notSent]:l})}),(0,a.jsx)("span",{children:_})]})]})}));var v=t(6723),I=t.n(v);let S=(0,n.memo)(e=>{let{senderName:s,className:t}=e;return(0,a.jsx)(c.x,{direction:"column",justifyContent:"space-between",alignItems:"flex-start",className:m()(I().wrap,t),children:(0,a.jsx)(c.x,{className:I().name,children:(0,a.jsx)("span",{className:I().nameText,children:s})})})}),T=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return!!e&&!!s&&g()(e).diff(g()(s),"minutes")>=t},b=(0,n.memo)((0,n.forwardRef)((e,s)=>{let{className:t,messages:r,fetchNextPage:i,pageSize:l,firstItemIndex:o,scrollerRef:d,isScrolling:x}=e,g=(0,n.useMemo)(()=>r.map((e,s,t)=>{var a,n;let i=(null===(a=t[s-1])||void 0===a?void 0:a.senderId)!==e.senderId,l=i||0===s||T(null==e?void 0:e.createdAt,null===(n=r[s-1])||void 0===n?void 0:n.createdAt);return{...e,showSender:i,showTime:l}}),[r]),u=(0,n.useCallback)((e,s)=>{let{id:t,createdAt:n,message:r,senderName:i,showSender:l,showTime:m}=s;return(0,a.jsxs)(c.x,{direction:"column",children:[l&&(0,a.jsx)(S,{senderName:i}),(0,a.jsx)(N,{isSent:!!t,showTime:m,classNameWrap:h().message,text:r,createdAt:n})]})},[]);return(0,a.jsx)(c.x,{direction:"column",className:m()(h().wrap,t),children:(0,a.jsx)(_.OO,{ref:s,scrollerRef:d,firstItemIndex:o,initialTopMostItemIndex:l,startReached:i,data:g,itemContent:u,isScrolling:x})})}));var k=t(95184),E=t.n(k);let O=i()(()=>Promise.all([t.e(675),t.e(167)]).then(t.bind(t,32167)),{loadableGenerated:{webpack:()=>[32167]},ssr:!1}),R=(0,n.memo)(e=>{let{className:s,messages:t,firstItemIndex:n,fetchNextPage:r,pageSize:i,roomInfo:l,onSendMessage:_,forwardRef:d,scrollerRef:h,isScrolling:x}=e;return(0,a.jsxs)(o.Z,{rounded:!0,className:m()(E().wrap,s),children:[(0,a.jsx)(c.x,{className:E().title,children:(0,a.jsx)("span",{className:E().titleText,children:l.roomName})}),(0,a.jsx)(c.x,{className:E().messages,children:!!(null==t?void 0:t.length)&&(0,a.jsx)(b,{firstItemIndex:n,fetchNextPage:r,scrollerRef:h,ref:d,messages:t,pageSize:i,isScrolling:x})}),(0,a.jsx)(O,{onSendMessage:_})]})});var H=R},95184:function(e){e.exports={title:"Chat_title__jta3g",titleText:"Chat_titleText__EEyIz",wrap:"Chat_wrap__Kdu3r",messages:"Chat_messages__vo_8O"}},21697:function(e){e.exports={wrap:"ChatMessage_wrap__spPLI",message:"ChatMessage_message__WeiNQ",sent:"ChatMessage_sent__a1HzA",time:"ChatMessage_time__kcXqb",hideTime:"ChatMessage_hideTime__CoBgh",messageContainer:"ChatMessage_messageContainer__ZNxcz",icon:"ChatMessage_icon__28Cxp",notSent:"ChatMessage_notSent__RKqBO"}},6723:function(e){e.exports={name:"ChatMessageSender_name__SxaO3",nameText:"ChatMessageSender_nameText__jo2Ex"}},92241:function(e){e.exports={wrap:"ChatMessages_wrap__gCsUw",message:"ChatMessages_message__SM7DV",trigger:"ChatMessages_trigger__EqrPe",content:"ChatMessages_content__1uDOH"}}}]);